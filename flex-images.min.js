// JavaScript flexImages v1.0.0
// https://github.com/Pixabay/JavaScript-flexImages
var flexImages=function(){function e(e){function t(e,t,r){var n=e.offsetWidth,o=window.getComputedStyle?getComputedStyle(e,null):e.currentStyle;return t?n+=(parseInt(o.marginLeft)||0)+(parseInt(o.marginRight)||0):r&&(n-=(parseInt(o.borderLeftWidth)||0)+(parseInt(o.borderRightWidth)||0)),n}function r(e,n,o,i){function a(e){o.maxRows&&g>o.maxRows||o.truncate&&e&&g>1?m[l][0].style.display="none":(m[l][5]&&(m[l][4].setAttribute("src",m[l][5]),m[l][5]=""),m[l][0].style.width=s+"px",m[l][0].style.height=h+"px",m[l][0].style.display="block")}for(var l,s,f,d,u=1,g=1,c=t(e,!1,!0),m=[],w=0,h=o.rowHeight,p=0;p<n.length;p++)if(m.push(n[p]),w+=n[p][3]+o.margin,w>=c){for(u=c/w,h=Math.ceil(o.rowHeight*u),f=0,s,l=0;l<m.length;l++)s=Math.ceil(m[l][3]*u),f+=s+o.margin,f>c&&(s-=f-c+1),a();m=[],w=0,g++}for(l=0;l<m.length;l++)s=Math.floor(m[l][3]*u),d=Math.floor(o.rowHeight*u),a(!0);i||c==t(e,!1,!0)||r(e,n,o,!0)}if(document.querySelector){var n={selector:0,container:".item",object:"img",rowHeight:180,maxRows:0,truncate:0};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);for(var i="object"==typeof n.selector?[n.selector]:document.querySelectorAll(n.selector),a=0;a<i.length;a++){var l=i[a],s=l.querySelectorAll(n.container),f=[],d=(new Date).getTime();if(s.length){n.margin=t(s[0],!0)-t(s[0],!1,!0);for(var u=0;u<s.length;u++){var g=s[u],c=parseInt(g.getAttribute("data-w")),m=parseInt(g.getAttribute("data-h")),w=c*(n.rowHeight/m),h=g.querySelector(n.object);f.push([g,c,m,w,h,h.getAttribute("data-src")])}r(l,f,n);var p=function(){r(l,f,n)};document.addEventListener?(window["flexImages_listener"+d]=p,window.removeEventListener("resize",window["flexImages_listener"+l.getAttribute("data-flex-t")]),delete window["flexImages_listener"+l.getAttribute("data-flex-t")],window.addEventListener("resize",window["flexImages_listener"+d])):l.onresize=p,l.setAttribute("data-flex-t",d)}}}}return e}();!function(){"function"==typeof define&&define.amd?define("flexImages",function(){return flexImages}):"undefined"!=typeof module&&module.exports?module.exports=flexImages:window.flexImages=flexImages}();